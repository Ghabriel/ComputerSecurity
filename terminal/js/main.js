define("Cache",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e.setup=function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("cache.js",{scope:"./"}).then(function(e){e.installing?console.log("Service worker installing"):e.waiting?console.log("Service worker installed"):e.active&&console.log("Service worker active")}).catch(function(e){console.log("Registration failed with "+e)})},e}();t.Cache=n}),define("types",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e}();t.Callable=n;var a=function(){function e(){}return e}();t.Call=a}),define("Interface",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){this.console=e,this.listeners=[]}return e.prototype.addListener=function(e){this.listeners.push(e)},e.prototype.newFunction=function(e,t){var n=document.createElement("div");n.classList.add("fn_def"),n.innerHTML+="<div class='name'>"+t.name+"</div>",n.innerHTML+="<div class='params'>"+t.params.join(",")+"</div>",n.innerHTML+="<div class='body'>"+t.body+"</div>",$(this.console).prepend(n);var a=this;n.addEventListener("click",function(){a.trigger(e)})},e.prototype.newCall=function(e,t,n){var a=document.createElement("div");a.classList.add("fn_call"),a.innerHTML+="<div class='name'>"+t.name+"</div>",a.innerHTML+="<div class='params'>"+t.params.join(",")+"</div>",a.innerHTML+="<div class='result'>"+n+"</div>",$(this.console).prepend(a);var r=this;a.addEventListener("click",function(){r.trigger(e)})},e.prototype.trigger=function(e){for(var t=0,n=this.listeners;t<n.length;t++){var a=n[t];a.setText(e)}},e}();t.Interface=n}),define("Parser",["require","exports","types"],function(require,exports,types_1){"use strict";var id="[A-Za-z_][A-Za-z0-9_]*",literal="(?:[0-9]*.[0-9]+|[0-9]+.?[0-9]*|"+id+")",paramList="(?: *"+id+"(?: *, *"+id+" *)*)?",argList="(?: *"+literal+"(?: *, *"+literal+" *)*)?",funDefSep="\\s",funDef="("+id+")"+funDefSep+"("+paramList+")"+funDefSep+"(.*)",funCall="("+id+")(?:\\(("+argList+")\\))?",evalCmd="^(eval)\\((.*)\\)$",defCmd="^(def) ("+id+") (.*)",regex={id:new RegExp(id),paramList:new RegExp(paramList),funDef:new RegExp(funDef),funCall:new RegExp(funCall),evalCmd:evalCmd,defCmd:defCmd},Parser=function(){function Parser(e){this.functions=[],e.addListener(this),this.ui=e,this.inputs=[]}return Parser.prototype.watch=function(e){var t=this;e.addEventListener("keydown",function(e){switch(e.keyCode){case 190:""==this.value&&(this.value=t.lastCommand,e.preventDefault())}}),e.addEventListener("keyup",function(e){switch(e.keyCode){case 13:t.parse(this.value)&&(this.value="")}}),this.inputs.push(e),e.focus()},Parser.prototype.parse=function(command){""==command&&(command=this.lastCommand),this.lastCommand=command;var matches=command.match(regex.defCmd);if(matches){var action=new types_1.Call;action.name=matches[1],action.params=[matches[2]];var result=void 0;try{result=eval(matches[3]),window[matches[2]]=result}catch(e){result="error"}return this.assign("ans",result),this.ui.newCall(command,action,result),!0}if(matches=command.match(regex.funDef)){var action=new types_1.Callable;return action.name=matches[1],action.params=this.split(matches[2],","),action.body=matches[3],this.functions.push(action),this.ui.newFunction(command,action),this.register(action),!0}if(matches=command.match(regex.evalCmd)){var action=new types_1.Call;action.name=matches[1],action.params=[];var result=void 0;try{result=eval(matches[2])}catch(e){result="error"}return this.assign("ans",result),this.ui.newCall(command,action,result),!0}if(matches=command.match(regex.funCall)){var action=new types_1.Call;action.name=matches[1],action.params=this.split(matches[2],",");var output=this.exec(action);return this.ui.newCall(command,action,output),!0}return!1},Parser.prototype.register=function(e){var t="function(";t+=e.params.join(","),t+=") { return ("+e.body+");}",this.assign(e.name,t)},Parser.prototype.exec=function(call){for(var name_1 in this.builtin)if(this.builtin.hasOwnProperty(name_1)&&name_1==call.name){var str=name_1+"("+call.params.join(",")+")",result=eval(str);return this.assign("ans",result),result}for(var _i=0,_a=this.functions;_i<_a.length;_i++){var fn=_a[_i];if(fn.name==call.name){var expectedNum=fn.params.length,actualNum=call.params.length;if(expectedNum==actualNum){for(var i=0;i<actualNum;i++)this.assign(fn.params[i],eval(call.params[i]));var result=this.eval(fn);return this.assign("ans",result),result}return"wrong number of arguments (expected "+expectedNum+", got "+actualNum+")"}}return"undefined function '"+call.name+"'"},Parser.prototype.assign=function(name,value){"string"==typeof value&&(value="'"+value+"'"),eval("window."+name+"="+value)},Parser.prototype.eval=function(fn){return eval(fn.body)},Parser.prototype.setText=function(e){for(var t=0,n=this.inputs;t<n.length;t++){var a=n[t];a.value=e}this.inputs[0].focus()},Parser.prototype.loadNative=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n=0,a=0,r=e;a<r.length;a++){var s=r[a];n+=s}return n/e.length}function t(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];for(var a=e.apply(void 0,t),r=0,s=0,i=t;s<i.length;s++){var o=i[s];r+=Math.pow(o-a,2)}return r/(t.length-1)}function n(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];return Math.sqrt(t.apply(void 0,e))}function a(e,t){var n={"0000":"1001","0001":"0100","0010":"1010","0011":"1011","0100":"1101","0101":"0001","0110":"1000","0111":"0101",1000:"0110",1001:"0010",1010:"0000",1011:"0011",1100:"1100",1101:"1110",1110:"1111",1111:"0111"},a=[[4,6,8,10,12,14,3,1,7,5,11,9,15,13],[6,5,12,15,10,9,11,8,13,14,7,4,1,2],[8,12,3,7,11,15,6,2,14,10,5,1,13,9],[10,15,7,2,13,8,14,11,4,1,9,12,3,6],[12,10,11,13,7,1,5,3,9,15,14,8,2,4],[14,9,15,8,1,6,13,10,3,4,2,5,12,11],[3,11,6,14,5,13,12,4,15,7,10,2,9,1],[1,8,2,11,3,10,4,13,5,12,6,15,7,14],[7,13,14,4,9,3,15,5,8,2,1,11,6,12],[5,14,10,1,15,4,7,12,2,9,13,6,8,3],[11,7,5,9,14,2,10,6,1,13,15,3,4,8],[9,4,1,12,8,5,2,15,11,6,3,14,10,7],[15,1,13,3,2,12,9,7,6,8,4,10,11,5],[13,2,9,6,4,11,1,14,12,3,8,7,5,10]],r=function(e,t){return e<=1||t<=1?e*t:a[e-2][t-2]},s=function(e,t){for(;e.length<t;)e="0"+e;return e},i=function(e,t){var n=4*(3-t),a=15<<n;return(e&a)>>n},o=function(e,t){return(e<<4)+t},c=function(e,t){return(e<<8)+t},l=function(e){return o(i(e,3),i(e,2))},u=function(e){var t=s(i(e,2).toString(2),4),a=s(i(e,3).toString(2),4),r=parseInt(n[t],2),c=parseInt(n[a],2);return o(r,c)},m=function(e){var t=s(i(e,0).toString(2),4),a=s(i(e,1).toString(2),4),r=s(i(e,2).toString(2),4),l=s(i(e,3).toString(2),4),u=parseInt(n[t],2),m=parseInt(n[a],2),d=parseInt(n[r],2),p=parseInt(n[l],2);return c(o(u,m),o(d,p))},d=function(e){var t=i(e,0),n=i(e,1),a=i(e,2),r=i(e,3);return c(o(t,r),o(a,n))},p=function(e,t){for(var n=s(e.toString(2),t),a="",r=0;r<t;r++)r>0&&r%4==0&&(a+=" "),a+=n[r];return a},f=parseInt("10000000",2),h=parseInt("110000",2),v=o(i(t,0),i(t,1)),g=o(i(t,2),i(t,3)),y=v^f^u(l(g)),x=y^g,w=y^h^u(l(x)),b=w^x,C=c(v,g),M=c(y,x),L=c(w,b),_=e^C,P=m(_);P=d(P);var k=r(1,i(P,0))^r(4,i(P,1)),S=r(4,i(P,0))^r(1,i(P,1)),q=r(1,i(P,2))^r(4,i(P,3)),I=r(4,i(P,2))^r(1,i(P,3)),E=c(o(k,S),o(q,I));P=E^M;var N=m(P);return N=d(N),N^=L,console.log("value = ",e," ("+p(e,8)+")"),console.log("key = ",t," ("+p(t,8)+")"),console.log("w0 = ",v," ("+p(v,8)+")"),console.log("w1 = ",g," ("+p(g,8)+")"),console.log("w2 = ",y," ("+p(y,8)+")"),console.log("w3 = ",x," ("+p(x,8)+")"),console.log("w4 = ",w," ("+p(w,8)+")"),console.log("w5 = ",b," ("+p(b,8)+")"),console.log("key0 = ",C," ("+p(C,16)+")"),console.log("key1 = ",M," ("+p(M,16)+")"),console.log("key2 = ",L," ("+p(L,16)+")"),console.log("round0 = ",_," ("+p(_,16)+")"),console.log("round1 = ",P," ("+p(P,16)+")"),console.log("result = ",N," ("+p(N,16)+")"),p(N,16)}function r(){for(var e=0,t=s.functions;e<t.length;e++){var n=t[e];console.log(n.name)}return""}this.functions=[{name:"log",params:["x"],body:"Math.log2(x)"},{name:"log2",params:["x"],body:"Math.log2(x)"},{name:"log10",params:["x"],body:"Math.log10(x)"},{name:"ln",params:["x"],body:"Math.log(x)"},{name:"pow",params:["x","y"],body:"Math.pow(x,y)"},{name:"sqrt",params:["x"],body:"Math.sqrt(x)"},{name:"cbrt",params:["x"],body:"Math.cbrt(x)"},{name:"rt",params:["r","x"],body:"Math.pow(x, 1/r)"},{name:"abs",params:["x"],body:"Math.abs(x)"},{name:"exp",params:["x"],body:"Math.exp(x)"},{name:"floor",params:["x"],body:"Math.floor(x)"},{name:"ceil",params:["x"],body:"Math.ceil(x)"},{name:"rand",params:[],body:"Math.random()"},{name:"ans",params:[],body:"ans"},{name:"dist",params:["x1","y1","x2","y2"],body:"(abs(x1-x2) + abs(y1-y2))/2"},{name:"edist",params:["x1","y1","x2","y2"],body:"Math.sqrt(Math.pow(x1-x2, 2) + Math.pow(y1-y2, 2))"},{name:"mdist",params:["x1","y1","x2","y2"],body:"abs(x1-x2) + abs(y1-y2)"},{name:"cdist",params:["x1","y1","x2","y2"],body:"max(abs(x1-x2), abs(y1-y2))"}];var s=this;this.builtin={avg:e,leti:t,sd:n,saes:a,help:r};for(var i=0,o=this.functions;i<o.length;i++){var c=o[i];this.register(c)}for(var l in this.builtin)this.builtin.hasOwnProperty(l)&&(window[l]=this.builtin[l])},Parser.prototype.split=function(e,t){return e?e.split(t):[]},Parser}();exports.Parser=Parser}),define("main",["require","exports","Cache","Interface","Parser"],function(e,t,n,a,r){"use strict";$(document).ready(function(){var e=document.querySelector("#command"),t=document.querySelector("#console"),s=document.querySelector("#submit"),i=new r.Parser(new a.Interface(t));i.loadNative(),i.watch(e),s.addEventListener("click",function(){i.parse(e.value)&&(e.value="")}),n.Cache.setup()})});
